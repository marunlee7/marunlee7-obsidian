<%*const GEMINI_API_KEY="
"%>
 
<%*
// ìš”ì•½ í”„ë¡¬í”„íŠ¸
const summary_prompt = `ë‹¹ì‹ ì€ í•œìžì„±ì–´ í•´ì„¤ ì „ë¬¸ê°€ìž…ë‹ˆë‹¤. í•œìžì•”ê¸°ë°•ì‚¬ ë¼ëŠ” ì±…ì˜ ì €ìž ë°•ì›ê¸¸ìž…ë‹ˆë‹¤. ì•„ëž˜ í…ìŠ¤íŠ¸(í•œìžì–´ ë˜ëŠ” í•œìžì„±ì–´ ë˜ëŠ” ê³ ì‚¬ì„±ì–´)ì— ëŒ€í•´ ë‹¤ìŒê³¼ ê°™ì€ êµ¬ì¡°ë¡œ ìš”ì•½ ë° í’€ì´ë¥¼ ìž‘ì„±í•˜ì„¸ìš”. ê´€ë ¨ì–´íœ˜ í•œìžì—ë§Œ [[]]ì‚¬ìš©. ë¨¸ë¦¬ë§ ìƒëžµí•©ë‹ˆë‹¤. 
- [[æ¸²]]
    - ë°”ë¦¼(ìˆ˜ë¬µí™”ì˜ ê¸°ë²•, ê·¸ëŸ¬ë°ì´ì…˜), ìž‘ì€ íë¦„
    - ìˆ˜ë¬µí™”ì—ì„œ ìƒ‰ì„ ë²ˆì§€ê²Œ í•˜ëŠ” ê¸°ë²•ì— ì‚¬ìš©
    - êµ¬ì„± : 
    - ì–´íœ˜: 
        - í˜„ì—¼([[æ¸²æŸ“]]): ë¬¼ê°ì„ í’€ì–´ ë²ˆì§€ê²Œ í•¨
        - í˜„ì—¼ë²•([[æ¸²æŸ“æ³•]]): ìˆ˜ë¬µí™”ì˜ ë°”ë¦¼ ê¸°ë²•
        - í˜„ë¥˜([[æ¸²æµ]]) : ìž”ìž”ížˆ íë¦„
- ë¬¸ìž¥ ê³ ì‹œ ê³ ì „

ê¸°ë³¸ì˜ë¯¸ ë° ìží˜•, ê´€ë ¨ ìš©ë²•, ê´€ë ¨ ì–´íœ˜ì— ëŒ€í•´ í•œêµ­ì–´ë¡œ ë‹µë³€í•˜ì„¸ìš”. ì²œìžë¬¸, ì‚¬ì„œì‚¼ê²½ ì—  í™œìš©ëœ ê²½ìš° ì§§ê²Œ ìŒë…ê³¼  í•¨ê»˜ ë„£ì–´ì„¸ìš”. ì£¼ìš” í•œìžì–´íœ˜ì—ëŠ” í•œìžì—ë§Œ ë‚´ë¶€ë§í¬ [[]] ì‚¬ìš©, ë³¼ë“œì²´ ì‚¬ìš©í•˜ì§€ ë§ê²ƒ`
%>
 
<%*
// ë…¸íŠ¸ ë‚´ìš© ê°€ì ¸ì˜¤ê¸°
const fileContent = tp.file.content;
%>
 
<%*
const response = await tp.obsidian.requestUrl({
    method: "POST",
    url: "https://generativelanguage.googleapis.com/v1beta/openai/chat/completions",
    headers: {
        "Authorization": "Bearer " + GEMINI_API_KEY,
    },
    body: JSON.stringify({
        model: "gemini-2.0-flash-exp", // ëª¨ë¸ëª…
        messages: [
            { "role": "system", "content": summary_prompt },
            { "role": "user", "content": fileContent }
        ]
    })
});
const summary = response.json.choices[0].message.content;
%>
 
<%*
// ìš”ì•½ ì¶œë ¥í•˜ê¸°
tR = `
## ðŸ“˜ gemini
> [!summary]+ 
> ${summary.split("\n").join("\n> ")}
`;
%>